document['addEventListener']('DOMContentLoaded',()=>{const _0x3392e8=document['getElementById']('theme-toggle');function _0x3ed577(_0x542012){document['body']['setAttribute']('data-theme',_0x542012),localStorage['setItem']('theme',_0x542012),_0x3392e8&&(_0x3392e8['checked']=_0x542012==='dark');}function _0x2ed3b2(){const _0xefc016=localStorage['getItem']('theme'),_0x4e3c27=window['matchMedia']('(prefers-color-scheme:\x20dark)')['matches'];_0x3ed577(_0xefc016||(_0x4e3c27?'dark':'light')),_0x3392e8&&_0x3392e8['addEventListener']('change',()=>{const _0x5950eb=_0x3392e8['checked']?'dark':'light';_0x3ed577(_0x5950eb);});}_0x2ed3b2();const _0x4ad10f='hidden',_0x31a9f0='No\x20results\x20found\x20for\x20your\x20query.',_0x344b5c='Prompt\x20copied!',_0x325e8c='Added\x20to\x20favorites!',_0x127658='Removed\x20from\x20favorites!',_0x28b117='Search\x20prompts\x20by\x20keywords...',_0x5dca24='Search\x20favorites\x20by\x20keywords...',_0x172d8b=0x12c,_0xea3595='Enter\x20keywords\x20to\x20hide,\x20separated\x20by\x20comma...';let _0x252677=[],_0x402a9c=[];const _0x15bc05=0xe;let _0x45c58d=0x0,_0x433949=![];const _0x2f2c2a=document['querySelector']('main'),_0x34d6f4=document['getElementById']('gallery-container'),_0x329dd2=document['getElementById']('favorites-container'),_0x1c9616=document['getElementById']('favorites-grid'),_0x45ab17=document['getElementById']('active-folder-title'),_0x14bafe=document['getElementById']('folders-panel'),_0xee13fa=document['getElementById']('tab-all'),_0xde3ccc=document['getElementById']('tab-favorites'),_0x501f52=document['getElementById']('empty-favorites-message'),_0x5832f2=document['getElementById']('favorites-search-empty-message'),_0x5bbe2a=document['getElementById']('copy-toast'),_0x346b90=document['getElementById']('loading-indicator'),_0x567a55=document['getElementById']('search-input'),_0x26e1ca=document['getElementById']('prompt-count'),_0xa9d46c=document['getElementById']('blacklist-toggle-button'),_0x14bf8a=document['getElementById']('like-threshold-input'),_0x3888e0=document['getElementById']('toggle-folders-button'),_0x480b11=document['getElementById']('toggle-card-size-button'),_0x57e223=document['querySelector']('.like-filter-container'),_0x17a751=document['getElementById']('export-favorites-button'),_0x84442b=document['getElementById']('import-favorites-button'),_0x337f36=document['getElementById']('export-folder-prompts-button'),_0x21aa69=document['getElementById']('card-size-slider'),_0x330728=document['getElementById']('card-size-slider-container');let _0x2f1a48=JSON['parse'](localStorage['getItem']('favorites'))||[],_0x51e512=![],_0x386888='all',_0x4c6864=![],_0x11512b=null,_0x3cf280=new Set();function _0x5508cf(_0x25c5de){if(!_0x34d6f4||!_0x21aa69)return;const _0x424ad7=_0x25c5de/0x64,_0xfc4054=_0x172d8b*_0x424ad7,_0x1ff28c=0x1+(_0x424ad7-0x1)/0x2;_0x34d6f4['style']['setProperty']('--card-min-width',_0xfc4054+'px'),_0x34d6f4['style']['setProperty']('--card-scale-factor',_0x424ad7),_0x34d6f4['style']['setProperty']('--like-indicator-scale-factor',_0x1ff28c),localStorage['setItem']('cardSizePercent',_0x25c5de),_0x21aa69['value']!=_0x25c5de&&(_0x21aa69['value']=_0x25c5de);}function _0x30d3e7(){if(!_0x21aa69)return;const _0x1368bb=localStorage['getItem']('cardSizePercent')||'100';_0x5508cf(parseInt(_0x1368bb,0xa)),_0x21aa69['addEventListener']('input',()=>_0x5508cf(_0x21aa69['value']));}function _0x355760(){blacklistManager['init'](),folderManager['init'](),_0x30d3e7(),_0x5ec4ce(),_0xfe48b9();}function _0x479e5b(){if(_0x3cf280['size']===0x0)return;_0x3cf280['forEach'](_0x5349ce=>{const _0x421e9e=_0x1c9616['querySelector']('.card[data-item-id=\x22'+_0x5349ce+'\x22]');if(_0x421e9e)_0x421e9e['classList']['remove']('selected');}),_0x3cf280['clear']();}function _0x2edba2(_0x194dd6){if(!_0x194dd6)return'';const _0x2c4a0b=_0x194dd6['replace'](/\\/g,'/'),_0x52ac27=_0x2c4a0b['lastIndexOf']('/');let _0x5c7f50=_0x2c4a0b;return _0x52ac27!==-0x1&&(_0x5c7f50=_0x2c4a0b['substring'](_0x52ac27+0x1)),_0x5c7f50['startsWith']('imagess')&&(_0x5c7f50=_0x5c7f50['substring']('imagess'['length'])),'images/'+_0x5c7f50;}function _0x1a6aee(){_0x51e512=!_0x51e512,_0x51e512?(_0x567a55['placeholder']=_0xea3595,_0x567a55['value']=blacklistManager['getKeywords']()['join'](',\x20'),_0x567a55['focus']()):(_0x567a55['value']='',_0x329dd2['classList']['contains'](_0x4ad10f)?_0x567a55['placeholder']=_0x28b117:_0x567a55['placeholder']=_0x5dca24,_0x3aab24());}function _0x2320a1(){const _0x8af23=_0x567a55['value'];blacklistManager['setKeywords'](_0x8af23);const {removedCount:_0x16ca88}=blacklistManager['filter'](_0x252677),_0x58604e=blacklistManager['getKeywords']();_0x229825(_0x16ca88>0x0?_0x16ca88+'\x20card'+(_0x16ca88>0x1?'s\x20were':'\x20was')+'\x20hidden.':_0x58604e['length']===0x0?'Blacklist\x20cleared.':'Blacklist\x20updated.'),_0x1a6aee();}function _0xfe48b9(){_0x2f2c2a['classList']['remove'](_0x4ad10f),_0x567a55['value']='',_0x252677=galleryData;_0x26e1ca&&(_0x26e1ca['textContent']=''+_0x252677['length']);const _0x4c3522=new Set(_0x252677['map'](_0x469d02=>_0x469d02['id']));_0x2f1a48=_0x2f1a48['filter'](_0xc79db0=>_0x4c3522['has'](_0xc79db0)),localStorage['setItem']('favorites',JSON['stringify'](_0x2f1a48)),_0x29fe76();}function _0x5ec4ce(){_0xee13fa['addEventListener']('click',_0x29fe76),_0xde3ccc['addEventListener']('click',_0x2a0a1a);_0x3888e0?_0x3888e0['addEventListener']('click',_0x511c03):console['error']('Error:\x20toggleFoldersButton\x20element\x20not\x20found!');_0x480b11?(_0x480b11['addEventListener']('click',_0x54e3fd),_0x1c9616['classList']['toggle']('small-cards',localStorage['getItem']('cardSize')==='small')):console['error']('Error:\x20toggleFoldersButton\x20element\x20not\x20found!');_0x17a751['addEventListener']('click',_0x4ffe71),_0x84442b['addEventListener']('click',_0x4545a7),_0x337f36['addEventListener']('click',_0x327d9b),_0xa9d46c['addEventListener']('click',_0x1a6aee);let _0x56fc2b;_0x567a55['addEventListener']('input',()=>{if(_0x51e512)return;clearTimeout(_0x56fc2b),_0x56fc2b=setTimeout(()=>{_0x329dd2['classList']['contains'](_0x4ad10f)?_0x3d1370():_0x4a450d();},0x12c);}),_0x567a55['addEventListener']('keydown',_0x5e59a8=>{_0x51e512&&_0x5e59a8['key']==='Enter'&&(_0x5e59a8['preventDefault'](),_0x2320a1());}),document['addEventListener']('keydown',_0x32ad99=>{_0x32ad99['key']==='Escape'&&!_0x329dd2['classList']['contains'](_0x4ad10f)&&_0x479e5b();}),document['addEventListener']('click',_0x32e929=>{if(_0x329dd2['classList']['contains'](_0x4ad10f))return;if(_0x32e929['ctrlKey']||_0x32e929['metaKey'])return;!_0x32e929['target']['closest']('#favorites-grid\x20.card')&&_0x479e5b();}),_0x14bf8a['addEventListener']('input',()=>{_0x3d1370();});const _0x3f6b29=document['getElementById']('scroll-to-top-btn');_0x3f6b29&&(window['addEventListener']('scroll',()=>{window['scrollY']>0x190?_0x3f6b29['classList']['add']('show'):_0x3f6b29['classList']['remove']('show');}),_0x3f6b29['addEventListener']('click',()=>{window['scrollTo']({'top':0x0,'behavior':'smooth'});}));}function _0x5e43ed(_0x3f2a67,_0x1d40b7,_0x4e3a75){const _0x3028c7=[..._0x3f2a67['querySelectorAll']('.card:not(.dragging)')],_0x507f76=_0x3028c7['find'](_0x27a1b6=>{const _0x48b450=_0x27a1b6['getBoundingClientRect']();return _0x1d40b7>=_0x48b450['left']&&_0x1d40b7<=_0x48b450['right']&&_0x4e3a75>=_0x48b450['top']&&_0x4e3a75<=_0x48b450['bottom'];});if(_0x507f76){const _0x148268=_0x507f76['getBoundingClientRect'](),_0x21bce4=_0x1d40b7>_0x148268['left']+_0x148268['width']/0x2;return _0x21bce4?{'elementToInsertBefore':_0x507f76['nextSibling'],'hoveredElement':_0x507f76,'isRightHalf':!![],'valid':!![]}:{'elementToInsertBefore':_0x507f76,'hoveredElement':_0x507f76,'isRightHalf':![],'valid':!![]};}return{'elementToInsertBefore':null,'hoveredElement':null,'isRightHalf':![],'valid':![]};}_0x1c9616&&(_0x1c9616['addEventListener']('dragover',_0x9cc496=>{_0x9cc496['preventDefault']();const _0xe64144=_0x1c9616['querySelector']('.dragging');if(!_0xe64144)return;_0x11512b&&_0x11512b['classList']['remove']('drag-over-left','drag-over-right');const {hoveredElement:_0x2b3abd,isRightHalf:_0x3a90c2,valid:_0x43249f}=_0x5e43ed(_0x1c9616,_0x9cc496['clientX'],_0x9cc496['clientY']);_0x4c6864=_0x43249f,_0x43249f?(_0x2b3abd['classList']['add'](_0x3a90c2?'drag-over-right':'drag-over-left'),_0x11512b=_0x2b3abd):_0x11512b=null;}),_0x1c9616['addEventListener']('dragleave',_0x346ca3=>{_0x11512b&&(_0x11512b['classList']['remove']('drag-over-left','drag-over-right'),_0x11512b=null,_0x4c6864=![]);}),_0x1c9616['addEventListener']('drop',_0x237332=>{_0x237332['preventDefault']();if(_0x237332['dataTransfer']['types']['includes']('application/json-item-ids'))return;_0x11512b&&(_0x11512b['classList']['remove']('drag-over-left','drag-over-right'),_0x11512b=null);if(_0x4c6864){const _0x1a9945=_0x1c9616['querySelector']('.dragging');if(!_0x1a9945)return;const {elementToInsertBefore:_0x148286}=_0x5e43ed(_0x1c9616,_0x237332['clientX'],_0x237332['clientY']);_0x148286?_0x1c9616['insertBefore'](_0x1a9945,_0x148286):_0x1c9616['appendChild'](_0x1a9945);const _0x2aa3be=[..._0x1c9616['querySelectorAll']('.card')],_0x37a09e=_0x2aa3be['map'](_0x4a113c=>_0x4a113c['dataset']['itemId']);if(_0x386888==='all')_0x2f1a48=_0x37a09e,localStorage['setItem']('favorites',JSON['stringify'](_0x2f1a48));else _0x386888!=='uncategorized'&&folderManager['reorderFolderContents'](_0x386888,_0x37a09e);_0x4d6832();}}));function _0x3d1370(){_0x329dd2['classList']['add'](_0x4ad10f);const _0xc36e37=_0x567a55['value']['toLowerCase']()['trim'](),{filteredData:_0x5b702a}=blacklistManager['filter'](_0x252677);_0x34d6f4['innerHTML']='',_0x45c58d=0x0,window['removeEventListener']('scroll',_0x45b478);if(_0xc36e37!==''){const _0x35e21c=_0xc36e37['split'](',')['map'](_0x1d7828=>_0x1d7828['trim']()['toLowerCase']())['filter'](_0x4baca4=>_0x4baca4['length']>0x0);let _0x2d0818=[];_0x35e21c['length']>0x0&&(_0x2d0818=_0x5b702a['filter'](_0xf613f9=>{return _0x35e21c['every'](_0x42bf05=>{const _0x472271=_0xf613f9['title']&&typeof _0xf613f9['title']==='string'&&_0xf613f9['title']['toLowerCase']()['includes'](_0x42bf05),_0x572b56=_0xf613f9['prompt']&&typeof _0xf613f9['prompt']==='string'&&_0xf613f9['prompt']['toLowerCase']()['includes'](_0x42bf05);return _0x472271||_0x572b56;});})),_0x402a9c=_0x2d0818['sort']((_0x1e6f75,_0x591e66)=>_0x591e66['like_count']-_0x1e6f75['like_count']);}else{let _0x1df924=parseInt(_0x14bf8a['value'],0xa);if(isNaN(_0x1df924)||_0x1df924<=0x0){const _0x1bc14b=0x2ee0,_0x48bf1d=0x32c8,_0x360a3a=0x32,_0x97f563=(_0x48bf1d-_0x1bc14b)/_0x360a3a,_0x5bdb6a=Math['floor'](Math['random']()*(_0x97f563+0x1));_0x1df924=_0x1bc14b+_0x5bdb6a*_0x360a3a;}_0x402a9c=_0x5b702a['filter'](_0x261fed=>_0x261fed['like_count']<=_0x1df924)['sort']((_0x118bd0,_0x1aec0d)=>_0x1aec0d['like_count']-_0x118bd0['like_count']),_0x14bf8a['placeholder']='Max\x20likes:\x20'+_0x1df924;}_0x402a9c['length']===0x0?(_0xc36e37!==''&&(_0x34d6f4['innerHTML']='<p\x20class=\x22empty-search-message\x22>'+_0x31a9f0+'</p>'),_0xe5e55c()):window['addEventListener']('scroll',_0x45b478),_0x202783();}function _0x202783(){if(_0x433949)return;_0x433949=!![],_0x441593(),setTimeout(()=>{const _0x3828ca=_0x402a9c['slice'](_0x45c58d,_0x45c58d+_0x15bc05);if(_0x3828ca['length']===0x0){_0x433949=![],_0xe5e55c(),window['removeEventListener']('scroll',_0x45b478);return;}_0x3828ca['forEach'](_0x23b3bd=>{_0x34d6f4['appendChild'](_0x42a20c(_0x23b3bd,![]));}),_0x45c58d+=_0x3828ca['length'],_0x433949=![],_0xe5e55c(),_0x45c58d>=_0x402a9c['length']&&window['removeEventListener']('scroll',_0x45b478);},0x12c);}function _0x45b478(){const _0x2ac883=0x1f4;window['innerHeight']+window['scrollY']>=document['documentElement']['scrollHeight']-_0x2ac883&&(!_0x34d6f4['classList']['contains'](_0x4ad10f)&&_0x202783());}function _0x4d6832(){_0x14bafe['innerHTML']='';const _0x5b02a0=document['createElement']('div');_0x5b02a0['className']='folder-card\x20folder-card--special',_0x5b02a0['dataset']['folderId']='all';if(_0x386888==='all')_0x5b02a0['classList']['add']('active');const _0x43a529=document['createElement']('div');_0x43a529['className']='folder-name-wrapper';const _0xe284dd=document['createElement']('span');_0xe284dd['className']='folder-name',_0xe284dd['innerHTML']='ðŸ—‚ï¸\x20All\x20Favorites';const _0x472945=document['createElement']('span');_0x472945['className']='folder-item-count',_0x472945['textContent']=_0x2f1a48['length'],_0x43a529['appendChild'](_0xe284dd),_0x43a529['appendChild'](_0x472945),_0x5b02a0['appendChild'](_0x43a529),_0x5b02a0['addEventListener']('click',()=>{_0x386888='all',_0x3aab24();}),_0x14bafe['appendChild'](_0x5b02a0);const _0x4dea72=document['createElement']('div');_0x4dea72['className']='folder-card\x20folder-card--special',_0x4dea72['dataset']['folderId']='uncategorized';if(_0x386888==='uncategorized')_0x4dea72['classList']['add']('active');const _0x350d27=document['createElement']('div');_0x350d27['className']='folder-name-wrapper';const _0x4d8966=document['createElement']('span');_0x4d8966['className']='folder-name',_0x4d8966['innerHTML']='ðŸ“¥\x20Uncategorized';const _0xa10248=document['createElement']('span');_0xa10248['className']='folder-item-count',_0xa10248['textContent']=folderManager['getUncategorizedFavorites'](_0x2f1a48)['length'],_0x350d27['appendChild'](_0x4d8966),_0x350d27['appendChild'](_0xa10248),_0x4dea72['appendChild'](_0x350d27),_0x4dea72['addEventListener']('click',()=>{_0x386888='uncategorized',_0x3aab24();}),_0x4dea72['addEventListener']('dragover',_0x4201f8=>{_0x4201f8['preventDefault'](),_0x4dea72['classList']['add']('drag-over');}),_0x4dea72['addEventListener']('dragleave',()=>{_0x4dea72['classList']['remove']('drag-over');}),_0x4dea72['addEventListener']('drop',_0x51d790=>{_0x51d790['preventDefault'](),_0x4dea72['classList']['remove']('drag-over');const _0x2109dd=_0x51d790['dataTransfer']['getData']('application/json-item-ids');if(_0x2109dd){const _0x293e11=JSON['parse'](_0x2109dd);folderManager['removeItemsFromAllFolders'](_0x293e11),_0x229825(_0x293e11['length']+'\x20item'+(_0x293e11['length']>0x1?'s':'')+'\x20moved\x20to\x20Uncategorized'),_0x479e5b();}else{const _0x3d897a=_0x51d790['dataTransfer']['getData']('text/plain');_0x3d897a&&(folderManager['removeItemFromAllFolders'](_0x3d897a),_0x229825('Moved\x20to\x20Uncategorized'));}_0x3aab24();}),_0x14bafe['appendChild'](_0x4dea72);const _0x55c88f=document['createElement']('div');_0x55c88f['className']='user-folders-grid';const _0x5b2e98=folderManager['getFolders']();_0x5b2e98['forEach'](_0x551e66=>{const _0x7e8a90=document['createElement']('div');_0x7e8a90['className']='folder-card',_0x7e8a90['dataset']['folderId']=_0x551e66['id'];if(_0x386888===_0x551e66['id'])_0x7e8a90['classList']['add']('active');const _0x234b8e=folderManager['getFolderContents'](_0x551e66['id']);if(_0x234b8e['length']>0x0){const _0x502df9=_0x234b8e[0x0],_0x70098f=_0x252677['find'](_0x4b377d=>_0x4b377d['id']===_0x502df9);_0x70098f&&_0x70098f['path']?(_0x7e8a90['classList']['add']('folder-card--with-thumbnail'),_0x7e8a90['style']['backgroundImage']='url(\x22'+_0x2edba2(_0x70098f['path'])+'\x22)'):_0x7e8a90['classList']['add']('folder-card--empty');}else _0x7e8a90['classList']['add']('folder-card--empty');const _0x2161a9=document['createElement']('div');_0x2161a9['className']='folder-name-wrapper';const _0x1ac4f8=document['createElement']('span');_0x1ac4f8['className']='folder-name',_0x1ac4f8['textContent']=_0x551e66['name'];const _0x428b6e=document['createElement']('span');_0x428b6e['className']='folder-item-count',_0x428b6e['textContent']=_0x234b8e['length'],_0x2161a9['appendChild'](_0x1ac4f8),_0x2161a9['appendChild'](_0x428b6e);const _0x383e9d=document['createElement']('div');_0x383e9d['className']='folder-controls';const _0x217167=document['createElement']('button');_0x217167['className']='folder-control-button',_0x217167['innerHTML']='âœï¸',_0x217167['title']='Rename\x20folder',_0x217167['addEventListener']('click',_0x245e91=>{_0x245e91['stopPropagation']();const _0xfd1ccc=prompt('Enter\x20new\x20folder\x20name:',_0x551e66['name']);_0xfd1ccc&&_0xfd1ccc['trim']()!==''&&(folderManager['renameFolder'](_0x551e66['id'],_0xfd1ccc),_0x3aab24());});const _0x51f8cf=document['createElement']('button');_0x51f8cf['className']='folder-control-button',_0x51f8cf['innerHTML']='ðŸ—‘ï¸',_0x51f8cf['title']='Delete\x20folder',_0x51f8cf['addEventListener']('click',_0x3b77bd=>{_0x3b77bd['stopPropagation'](),confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20the\x20folder\x20\x22'+_0x551e66['name']+'\x22?\x20Items\x20inside\x20will\x20become\x20uncategorized.')&&(folderManager['deleteFolder'](_0x551e66['id']),_0x386888===_0x551e66['id']&&(_0x386888='all'),_0x3aab24());}),_0x383e9d['appendChild'](_0x217167),_0x383e9d['appendChild'](_0x51f8cf),_0x7e8a90['appendChild'](_0x2161a9),_0x7e8a90['appendChild'](_0x383e9d),_0x7e8a90['addEventListener']('click',()=>{_0x386888=_0x551e66['id'],_0x3aab24();}),_0x7e8a90['addEventListener']('dragover',_0x5a8911=>{_0x5a8911['preventDefault'](),_0x7e8a90['classList']['add']('drag-over');}),_0x7e8a90['addEventListener']('dragleave',()=>_0x7e8a90['classList']['remove']('drag-over')),_0x7e8a90['addEventListener']('drop',_0x3f8f8c=>{_0x3f8f8c['preventDefault'](),_0x7e8a90['classList']['remove']('drag-over');const _0x1b2b73=_0x3f8f8c['dataTransfer']['getData']('application/json-item-ids');if(_0x1b2b73){const _0x46a083=JSON['parse'](_0x1b2b73);folderManager['addItemsToFolder'](_0x46a083,_0x551e66['id']),_0x229825('Moved\x20'+_0x46a083['length']+'\x20item'+(_0x46a083['length']>0x1?'s':'')+'\x20to\x20\x22'+_0x551e66['name']+'\x22'),_0x479e5b();}else{const _0x4ad1f3=_0x3f8f8c['dataTransfer']['getData']('text/plain');_0x4ad1f3&&(folderManager['addItemToFolder'](_0x4ad1f3,_0x551e66['id']),_0x229825('Moved\x20to\x20\x22'+_0x551e66['name']+'\x22'));}_0x3aab24();}),_0x55c88f['appendChild'](_0x7e8a90);});const _0x3eabb3=document['createElement']('div');_0x3eabb3['className']='folder-card',_0x3eabb3['id']='add-folder-button',_0x3eabb3['title']='Create\x20New\x20Folder',_0x3eabb3['addEventListener']('click',()=>{const _0x2d0406=prompt('Enter\x20a\x20name\x20for\x20the\x20new\x20folder:');_0x2d0406&&_0x2d0406['trim']()!==''&&(folderManager['createFolder'](_0x2d0406),_0x3aab24());}),_0x55c88f['appendChild'](_0x3eabb3),_0x14bafe['appendChild'](_0x55c88f);}function _0x4a450d(){_0x1c9616['innerHTML']='',_0x5832f2['classList']['add'](_0x4ad10f);let _0x3f7bbd=[],_0xe15824='';if(_0x386888==='all')_0x3f7bbd=[..._0x2f1a48],_0xe15824='All\x20Favorites';else{if(_0x386888==='uncategorized')_0x3f7bbd=folderManager['getUncategorizedFavorites'](_0x2f1a48),_0xe15824='Uncategorized';else{_0x3f7bbd=folderManager['getFolderContents'](_0x386888);const _0x18a879=folderManager['getFolders']()['find'](_0x5b8f6b=>_0x5b8f6b['id']===_0x386888);_0x18a879&&(_0xe15824=_0x18a879['name']);}}const _0x180af5=_0x3f7bbd['map'](_0x11e285=>_0x252677['find'](_0x5891bc=>_0x5891bc['id']===_0x11e285))['filter'](Boolean);_0x45ab17&&(_0x2f1a48['length']>0x0?(_0x45ab17['textContent']=_0xe15824,_0x45ab17['classList']['remove'](_0x4ad10f)):_0x45ab17['classList']['add'](_0x4ad10f));const {filteredData:_0x4faca9}=blacklistManager['filter'](_0x180af5),_0x2f58e4=_0x567a55['value'],_0x385bbb=searchInFavorites(_0x2f58e4,_0x4faca9);_0x501f52['classList']['add'](_0x4ad10f);if(_0x2f1a48['length']===0x0){_0x501f52['classList']['remove'](_0x4ad10f),_0x14bafe['classList']['add'](_0x4ad10f),_0x3888e0['innerHTML']='ðŸ“\x20Show\x20Folders';return;}if(_0x385bbb['length']===0x0){_0x5832f2['textContent']='No\x20favorites\x20match\x20your\x20current\x20filter\x20or\x20search.',_0x5832f2['classList']['remove'](_0x4ad10f);return;}_0x385bbb['forEach'](_0x751e19=>{_0x1c9616['appendChild'](_0x42a20c(_0x751e19,!![]));});}function _0x3aab24(){_0x51e512=![],_0x479e5b(),!_0x329dd2['classList']['contains'](_0x4ad10f)?(_0x4d6832(),_0x4a450d()):_0x3d1370();}function _0x4f1c04(_0x403157){const _0xa16956=document['createElement']('div');return _0xa16956['className']='drag-ghost',_0xa16956['textContent']=_0x403157+'\x20item'+(_0x403157>0x1?'s':''),document['body']['appendChild'](_0xa16956),_0xa16956;}function _0x42a20c(_0x4a03fa,_0x9a06a9=![]){const _0x7cfe9c=_0x2f1a48['includes'](_0x4a03fa['id']),_0x293a3e=document['createElement']('div'),_0x1c0d00=!_0x329dd2['classList']['contains'](_0x4ad10f)&&_0x567a55['value']['trim']()!=='',_0x27b867=_0x9a06a9&&!_0x1c0d00;_0x293a3e['draggable']=!![];_0x9a06a9&&_0x293a3e['addEventListener']('click',_0x346926=>{(_0x346926['ctrlKey']||_0x346926['metaKey'])&&(_0x346926['preventDefault'](),_0x3cf280['has'](_0x4a03fa['id'])?(_0x3cf280['delete'](_0x4a03fa['id']),_0x293a3e['classList']['remove']('selected')):(_0x3cf280['add'](_0x4a03fa['id']),_0x293a3e['classList']['add']('selected')));});_0x293a3e['addEventListener']('dragstart',_0x50f47=>{const _0x5e1864=_0x9a06a9&&_0x3cf280['size']>0x0&&_0x3cf280['has'](_0x4a03fa['id']);if(_0x5e1864){_0x50f47['dataTransfer']['setData']('application/json-item-ids',JSON['stringify']([..._0x3cf280]));const _0xc46d75=_0x4f1c04(_0x3cf280['size']);_0x50f47['dataTransfer']['setDragImage'](_0xc46d75,0x14,0x14),setTimeout(()=>document['body']['removeChild'](_0xc46d75),0x0),setTimeout(()=>{_0x3cf280['forEach'](_0x1fa2e2=>{const _0x51cc3b=_0x1c9616['querySelector']('.card[data-item-id=\x22'+_0x1fa2e2+'\x22]');if(_0x51cc3b)_0x51cc3b['classList']['add']('dragging');});if(_0x1c9616)_0x1c9616['classList']['add']('is-reordering');},0x0);}else _0x9a06a9&&_0x479e5b(),_0x50f47['dataTransfer']['setData']('text/plain',_0x4a03fa['id']),_0x27b867&&setTimeout(()=>{_0x293a3e['classList']['add']('dragging');if(_0x1c9616)_0x1c9616['classList']['add']('is-reordering');},0x0);}),_0x293a3e['addEventListener']('dragend',()=>{_0x1c9616['querySelectorAll']('.dragging')['forEach'](_0x80b2a=>_0x80b2a['classList']['remove']('dragging'));if(_0x1c9616)_0x1c9616['classList']['remove']('is-reordering');_0x4c6864=![];}),_0x293a3e['className']='card',_0x293a3e['dataset']['itemId']=_0x4a03fa['id'];const _0x2f2a4b=_0x293a3e['appendChild'](document['createElement']('img'));_0x2f2a4b['loading']='lazy',_0x2f2a4b['alt']=_0x4a03fa['title']||'Image\x20from\x20gallery',_0x2f2a4b['src']=_0x2edba2(_0x4a03fa['path']);if(!_0x9a06a9){const _0x56e961=document['createElement']('div');_0x56e961['className']='card-like-count';const _0x581bc2=_0x4a03fa['like_count']>0x3e7?(_0x4a03fa['like_count']/0x3e8)['toFixed'](0x1)+'k':_0x4a03fa['like_count'];_0x56e961['innerHTML']='â¤ï¸\x20'+_0x581bc2,_0x293a3e['appendChild'](_0x56e961);}const _0xd0711f=document['createElement']('div');_0xd0711f['className']='card-internal-prompt',_0xd0711f['textContent']=_0x4a03fa['prompt'],_0x293a3e['appendChild'](_0xd0711f);const _0x230eb1=document['createElement']('button');_0x230eb1['className']='prompt-internal-close-button',_0x230eb1['innerHTML']='&times;',_0x230eb1['setAttribute']('aria-label','Close\x20prompt'),_0xd0711f['appendChild'](_0x230eb1);const _0x359bbd=_0x293a3e['appendChild'](document['createElement']('div'));_0x359bbd['className']='overlay';const _0x1a7a45=document['createElement']('button');_0x1a7a45['className']='icon-button\x20copy-button',_0x1a7a45['title']='Copy\x20prompt',_0x1a7a45['innerHTML']='ðŸ“‹',_0x1a7a45['addEventListener']('click',_0x133c50=>{_0x133c50['stopPropagation'](),_0x3357ed(_0x4a03fa['prompt']);}),_0x359bbd['appendChild'](_0x1a7a45);const _0x4570c3=document['createElement']('button');_0x4570c3['className']='icon-button\x20view-prompt-button',_0x4570c3['title']='View\x20prompt',_0x4570c3['innerHTML']='ðŸ‘€',_0x4570c3['addEventListener']('click',_0x4fd3cf=>{_0x4fd3cf['stopPropagation'](),_0x293a3e['classList']['add']('prompt-active');}),_0x359bbd['appendChild'](_0x4570c3);const _0x3a7ac4=document['createElement']('button');return _0x3a7ac4['className']='icon-button\x20favorite-button',_0x9a06a9?(_0x3a7ac4['innerHTML']='âŒ',_0x3a7ac4['title']='Remove\x20from\x20favorites'):_0x7cfe9c?(_0x3a7ac4['innerHTML']='âŒ',_0x3a7ac4['title']='Remove\x20from\x20favorites'):(_0x3a7ac4['innerHTML']='â­',_0x3a7ac4['title']='Add\x20to\x20favorites'),_0x3a7ac4['addEventListener']('click',_0x5d5cdc=>{_0x5d5cdc['stopPropagation'](),_0x4f1321(_0x4a03fa['id'],_0x3a7ac4);}),_0x359bbd['appendChild'](_0x3a7ac4),_0x230eb1['addEventListener']('click',_0x1be898=>{_0x1be898['stopPropagation'](),_0x293a3e['classList']['remove']('prompt-active');}),_0x293a3e;}function _0x29fe76(){_0x34d6f4['classList']['remove'](_0x4ad10f),_0x330728&&_0x330728['classList']['remove'](_0x4ad10f),_0x329dd2['classList']['add'](_0x4ad10f),_0x57e223['classList']['remove'](_0x4ad10f),_0x501f52['classList']['add'](_0x4ad10f),_0xee13fa['classList']['add']('active'),_0xde3ccc['classList']['remove']('active'),_0x567a55['placeholder']=_0x28b117,window['removeEventListener']('scroll',_0x45b478),_0x402a9c['length']>0x0&&_0x45c58d<_0x402a9c['length']&&window['addEventListener']('scroll',_0x45b478),_0x3d1370();}function _0x2a0a1a(){_0x34d6f4['classList']['add'](_0x4ad10f);_0x330728&&_0x330728['classList']['add'](_0x4ad10f);_0x329dd2['classList']['remove'](_0x4ad10f),_0x57e223['classList']['add'](_0x4ad10f),_0xee13fa['classList']['remove']('active'),_0xde3ccc['classList']['add']('active'),_0x386888='uncategorized',_0x567a55['value']='',_0x567a55['placeholder']=_0x5dca24;const _0x3fcc28=localStorage['getItem']('foldersPanelState'),_0x37708c=_0x3fcc28==='hidden';_0x14bafe['classList']['toggle'](_0x4ad10f,_0x37708c),_0x3888e0['innerHTML']=_0x37708c?'ðŸ“\x20Show\x20Folders':'ðŸ“\x20Hide\x20Folders',_0x329dd2['classList']['toggle']('folders-panel-hidden',_0x37708c),_0x3aab24(),window['removeEventListener']('scroll',_0x45b478);}function _0x3357ed(_0x54d381){navigator['clipboard']['writeText'](_0x54d381)['then'](()=>{_0x229825(_0x344b5c);})['catch'](_0x40ac30=>{console['error']('Error\x20copying\x20text:\x20',_0x40ac30),alert('Error\x20copying\x20text.');});}function _0x511c03(){const _0x5ae992=_0x14bafe['classList']['toggle'](_0x4ad10f);_0x3888e0['innerHTML']=_0x5ae992?'ðŸ“\x20Show\x20Folders':'ðŸ“\x20Hide\x20Folders',localStorage['setItem']('foldersPanelState',_0x5ae992?'hidden':'visible'),_0x329dd2['classList']['toggle']('folders-panel-hidden',_0x5ae992);}function _0x54e3fd(){_0x1c9616['classList']['toggle']('small-cards');const _0x9b4627=_0x1c9616['classList']['contains']('small-cards');localStorage['setItem']('cardSize',_0x9b4627?'small':'normal');}function _0x327d9b(){let _0x25f03e=[],_0x145da8='';if(_0x386888==='all')_0x25f03e=[..._0x2f1a48],_0x145da8='All\x20Favorites';else{if(_0x386888==='uncategorized')_0x25f03e=folderManager['getUncategorizedFavorites'](_0x2f1a48),_0x145da8='Uncategorized';else{const _0x92cb97=folderManager['getFolders']()['find'](_0x3c6c03=>_0x3c6c03['id']===_0x386888);if(_0x92cb97)_0x25f03e=folderManager['getFolderContents'](_0x386888),_0x145da8=_0x92cb97['name'];else{_0x229825('Could\x20not\x20find\x20the\x20active\x20folder.');return;}}}if(_0x25f03e['length']===0x0){_0x229825('This\x20folder\x20is\x20empty.\x20Nothing\x20to\x20export.');return;}const _0x287b2f=_0x25f03e['map'](_0x27d54f=>_0x252677['find'](_0x3230e9=>_0x3230e9['id']===_0x27d54f))['filter'](Boolean)['map'](_0x4a9362=>{return _0x4a9362['prompt']['replace'](/(\r\n|\n|\r)/gm,'\x20')['replace'](/\s+/g,'\x20')['trim']();}),_0x526e9b=_0x287b2f['join']('\x0a'),_0x488748=_0x287b2f['length'],_0x1f2e81=_0x145da8['replace'](/[\/\\?%*:|"<>]/g,'-'),_0x1255d1=_0x1f2e81+'\x20('+_0x488748+').txt',_0x26539f=new Blob([_0x526e9b],{'type':'text/plain;charset=utf-8'}),_0x3be22a=URL['createObjectURL'](_0x26539f),_0x43dcba=document['createElement']('a');_0x43dcba['href']=_0x3be22a,_0x43dcba['download']=_0x1255d1,document['body']['appendChild'](_0x43dcba),_0x43dcba['click'](),document['body']['removeChild'](_0x43dcba),URL['revokeObjectURL'](_0x3be22a),_0x229825('Exported\x20'+_0x488748+'\x20prompt'+(_0x488748>0x1?'s':'')+'\x20from\x20\x22'+_0x145da8+'\x22.');}function _0x4f1321(_0x32fe01,_0xebaed1){const _0x2b131b=_0x2f1a48['indexOf'](_0x32fe01),_0x4d5650=_0x2b131b>-0x1;let _0x58fcff='';_0x4d5650?(_0x2f1a48['splice'](_0x2b131b,0x1),folderManager['removeItemFromAllFolders'](_0x32fe01),_0x58fcff=_0x127658,_0xebaed1['innerHTML']==='âŒ'&&!_0x88f80f(_0xebaed1)&&(_0xebaed1['innerHTML']='â­',_0xebaed1['title']='Add\x20to\x20favorites')):(_0x2f1a48['unshift'](_0x32fe01),_0x58fcff=_0x325e8c,_0xebaed1['innerHTML']==='â­'&&!_0x88f80f(_0xebaed1)&&(_0xebaed1['innerHTML']='âŒ',_0xebaed1['title']='Remove\x20from\x20favorites')),localStorage['setItem']('favorites',JSON['stringify'](_0x2f1a48)),_0x229825(_0x58fcff),(_0x88f80f(_0xebaed1)||!_0x329dd2['classList']['contains'](_0x4ad10f))&&_0x4a450d();}function _0x4ffe71(){try{const _0x11ac4b={'version':0x1,'timestamp':new Date()['toISOString'](),'favorites':_0x2f1a48,'folderState':folderManager['getState']()},_0xc405be=JSON['stringify'](_0x11ac4b,null,0x2),_0x507536=new Blob([_0xc405be],{'type':'application/json'}),_0x1b4621=URL['createObjectURL'](_0x507536),_0x668252=document['createElement']('a');_0x668252['href']=_0x1b4621;const _0x48fcca=new Date()['toISOString']()['slice'](0x0,0xa);_0x668252['download']='prompt-gallery-favorites-'+_0x48fcca+'.json',document['body']['appendChild'](_0x668252),_0x668252['click'](),document['body']['removeChild'](_0x668252),URL['revokeObjectURL'](_0x1b4621),_0x229825('Favorites\x20exported\x20successfully!');}catch(_0x466102){console['error']('Error\x20exporting\x20favorites:',_0x466102),_0x229825('Failed\x20to\x20export\x20favorites.');}}function _0x4545a7(){const _0x1f20cc=document['createElement']('input');_0x1f20cc['type']='file',_0x1f20cc['accept']='application/json,.json',_0x1f20cc['onchange']=_0xf58a89=>{const _0x18c6d5=_0xf58a89['target']['files'][0x0];if(!_0x18c6d5)return;const _0x48180a=new FileReader();_0x48180a['onload']=function(_0x5c1ab6){try{const _0x5b8bb4=JSON['parse'](_0x5c1ab6['target']['result']);if(typeof _0x5b8bb4!=='object'||_0x5b8bb4===null)throw new Error('Invalid\x20file\x20format:\x20not\x20an\x20object.');if(!Array['isArray'](_0x5b8bb4['favorites']))throw new Error('Invalid\x20data:\x20\x22favorites\x22\x20is\x20not\x20an\x20array.');if(typeof _0x5b8bb4['folderState']!=='object'||_0x5b8bb4['folderState']===null||!Array['isArray'](_0x5b8bb4['folderState']['folders'])||typeof _0x5b8bb4['folderState']['folderContents']!=='object')throw new Error('Invalid\x20data:\x20\x22folderState\x22\x20is\x20malformed.');const _0x201c58=new Set(_0x252677['map'](_0xc65b4b=>_0xc65b4b['id'])),_0x5ebb79=_0x5b8bb4['favorites']['filter'](_0x29e9ba=>_0x201c58['has'](_0x29e9ba)),_0x496c69={};for(const _0x1db7e3 in _0x5b8bb4['folderState']['folderContents']){if(Object['hasOwnProperty']['call'](_0x5b8bb4['folderState']['folderContents'],_0x1db7e3)){const _0x446dae=_0x5b8bb4['folderState']['folderContents'][_0x1db7e3];_0x496c69[_0x1db7e3]=_0x446dae['filter'](_0x4f6d59=>_0x201c58['has'](_0x4f6d59));}}const _0x458274={..._0x5b8bb4['folderState'],'folderContents':_0x496c69},_0x89e51d=_0x5b8bb4['favorites']['length'],_0x3a4912=_0x5ebb79['length'],_0x2af229=_0x89e51d-_0x3a4912;_0x2f1a48=_0x5ebb79,localStorage['setItem']('favorites',JSON['stringify'](_0x2f1a48)),folderManager['replaceState'](_0x458274);let _0x2069d3='Favorites\x20imported\x20successfully!';_0x2af229>0x0&&(_0x2069d3+='\x20'+_0x2af229+'\x20missing\x20card'+(_0x2af229>0x1?'s\x20were':'\x20was')+'\x20ignored.'),_0x229825(_0x2069d3),_0x3aab24();}catch(_0x1601e0){console['error']('Error\x20importing\x20favorites:',_0x1601e0),_0x229825('Import\x20failed:\x20'+_0x1601e0['message']);}},_0x48180a['readAsText'](_0x18c6d5);},_0x1f20cc['click']();}function _0x88f80f(_0x6035f3){return _0x6035f3['closest']('#favorites-grid\x20.card')!==null;}function _0x229825(_0x34266d){_0x5bbe2a['textContent']=_0x34266d,_0x5bbe2a['classList']['add']('show'),setTimeout(()=>{_0x5bbe2a['classList']['remove']('show');},0x7d0);}function _0x441593(){_0x346b90['classList']['remove'](_0x4ad10f);}function _0xe5e55c(){_0x346b90['classList']['add'](_0x4ad10f);}function _0x1f49d4(_0x56c494){let _0x291cf0=_0x56c494['length'],_0x34ab9a;while(_0x291cf0!==0x0){_0x34ab9a=Math['floor'](Math['random']()*_0x291cf0),_0x291cf0--,[_0x56c494[_0x291cf0],_0x56c494[_0x34ab9a]]=[_0x56c494[_0x34ab9a],_0x56c494[_0x291cf0]];}return _0x56c494;}_0x355760();});