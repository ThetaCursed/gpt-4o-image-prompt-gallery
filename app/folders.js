window['folderManager']=(function(){const _0x2bbb39='promptGalleryFolders';let _0x4d6da2={'folders':[],'folderContents':{}};function _0x1d3740(){const _0x4a9890=JSON['parse'](localStorage['getItem'](_0x2bbb39));_0x4a9890&&Array['isArray'](_0x4a9890['folders'])&&typeof _0x4a9890['folderContents']==='object'&&(_0x4d6da2=_0x4a9890);}function _0x143a62(){localStorage['setItem'](_0x2bbb39,JSON['stringify'](_0x4d6da2));}function _0x533e6e(){_0x1d3740();}function _0x580917(){return JSON['parse'](JSON['stringify'](_0x4d6da2['folders']));}function _0x2f5d47(_0x2d15fb){return _0x4d6da2['folderContents'][_0x2d15fb]?[..._0x4d6da2['folderContents'][_0x2d15fb]]:[];}function _0x3c4d2e(_0xfd0eaa){const _0x55816a=new Set(Object['values'](_0x4d6da2['folderContents'])['flat']());return _0xfd0eaa['filter'](_0x16144=>!_0x55816a['has'](_0x16144));}function _0x1f269a(_0x1b838d){const _0x39dd34={'id':'folder-'+Date['now'](),'name':_0x1b838d||'Новая\x20папка'};return _0x4d6da2['folders']['push'](_0x39dd34),_0x4d6da2['folderContents'][_0x39dd34['id']]=[],_0x143a62(),_0x39dd34;}function _0x36b51c(_0xfa146d){if(_0xfa146d&&Array['isArray'](_0xfa146d['folders'])&&typeof _0xfa146d['folderContents']==='object')return _0x4d6da2=JSON['parse'](JSON['stringify'](_0xfa146d)),_0x143a62(),!![];return![];}function _0x246a98(){return JSON['parse'](JSON['stringify'](_0x4d6da2));}function _0x492be4(_0x4659db,_0x1910b6){const _0x3e8220=_0x4d6da2['folders']['find'](_0x3a06af=>_0x3a06af['id']===_0x4659db);if(_0x3e8220&&_0x1910b6['trim']())return _0x3e8220['name']=_0x1910b6['trim'](),_0x143a62(),!![];return![];}function _0x54a415(_0x1bedd0){_0x4d6da2['folders']=_0x4d6da2['folders']['filter'](_0x2850d1=>_0x2850d1['id']!==_0x1bedd0),delete _0x4d6da2['folderContents'][_0x1bedd0],_0x143a62();}function _0x5ab2d5(_0x2d31d5,_0x1a45cc){if(!Array['isArray'](_0x2d31d5)||_0x2d31d5['length']===0x0)return;const _0x4b953e=new Set(_0x2d31d5);Object['keys'](_0x4d6da2['folderContents'])['forEach'](_0x3638be=>{_0x4d6da2['folderContents'][_0x3638be]=_0x4d6da2['folderContents'][_0x3638be]['filter'](_0x16798e=>!_0x4b953e['has'](_0x16798e));});if(_0x4d6da2['folderContents'][_0x1a45cc]){const _0xd717e1=new Set(_0x4d6da2['folderContents'][_0x1a45cc]),_0x4f3da2=_0x2d31d5['filter'](_0x40499a=>!_0xd717e1['has'](_0x40499a));_0x4d6da2['folderContents'][_0x1a45cc]['unshift'](..._0x4f3da2);}_0x143a62();}function _0x53f5d0(_0x27c9e4,_0x243f34){Object['keys'](_0x4d6da2['folderContents'])['forEach'](_0x23bea4=>{_0x4d6da2['folderContents'][_0x23bea4]=_0x4d6da2['folderContents'][_0x23bea4]['filter'](_0x442035=>_0x442035!==_0x27c9e4);}),_0x4d6da2['folderContents'][_0x243f34]&&!_0x4d6da2['folderContents'][_0x243f34]['includes'](_0x27c9e4)&&_0x4d6da2['folderContents'][_0x243f34]['unshift'](_0x27c9e4),_0x143a62();}function _0x3a47f8(_0x11b3bf){const _0xe17f3b=new Set(_0x11b3bf);Object['keys'](_0x4d6da2['folderContents'])['forEach'](_0x393057=>{_0x4d6da2['folderContents'][_0x393057]=_0x4d6da2['folderContents'][_0x393057]['filter'](_0x3a4bb0=>!_0xe17f3b['has'](_0x3a4bb0));}),_0x143a62();}function _0x4250fa(_0x1f702b){_0x3a47f8([_0x1f702b]);}function _0x3c3e39(_0x248344,_0x466733){_0x4d6da2['folderContents'][_0x248344]&&(_0x4d6da2['folderContents'][_0x248344]=_0x466733,_0x143a62());}return{'init':_0x533e6e,'getState':_0x246a98,'replaceState':_0x36b51c,'getFolders':_0x580917,'getFolderContents':_0x2f5d47,'getUncategorizedFavorites':_0x3c4d2e,'createFolder':_0x1f269a,'renameFolder':_0x492be4,'deleteFolder':_0x54a415,'addItemsToFolder':_0x5ab2d5,'addItemToFolder':_0x53f5d0,'removeItemsFromAllFolders':_0x3a47f8,'removeItemFromAllFolders':_0x4250fa,'reorderFolderContents':_0x3c3e39};}());